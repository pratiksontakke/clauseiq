---
description: 
globs: 
alwaysApply: true
---
Below is the â€œFinal Screen-Flow Documentâ€.  
Every numbered screen is a concrete page or modal the user can encounter; each bullet states its exact purpose and which roles can view or act.  
No code, no assumptionsâ€”only what is already locked in the PRD, tech-stack, comment-flow, and assignment docs.

------------------------------------------------------------------------
LEGEND  
CM = Contract Managerâ€ƒâ€‚AS = Authorised Signatoryâ€ƒâ€‚CO = Contract Observer
------------------------------------------------------------------------

A. ENTRY & AUTH SCREENS  (ALL ROLES)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
00 Landing  
â€ƒâ€¢ Buttons Log-in / Create Accountâ€ƒâ€¢ Link Help Center

01 Sign-Up  
â€ƒâ€¢ E-mail + Passwordâ€ƒâ€¢ â€œCreate Accountâ€ â†’ verification e-mail

02 Verify-Email  
â€ƒâ€¢ Message â€œCheck your inboxâ€â€ƒâ€¢ Link returns here as confirmed â†’ 04

03 Log-In  
â€ƒâ€¢ E-mail + Passwordâ€ƒâ€¢ Link â€œForgot Password?â€ â†’ reset flow

04 Role Router*  
â€ƒâ€¢ Reads first accessible contract â†’ routes to 05-CM / 05-AS / 05-CO  
â€ƒ(*If user has no contracts yet and is not a CM, shows holding page â€œNo invitationsâ€.)

B. CONTRACT MANAGER FLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
05-CM Dashboard  
â€ƒTiles (Draftâ€†|â€†Reviewâ€†|â€†Await Signâ€†|â€†Signedâ€†|â€†Expiring)  
â€ƒâ€œMy Tasksâ€ tableâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒ[Upload Contract]

06 Upload Wizard (modal, 3 steps)  
â€ƒ1 Fileâ€ƒ2 Metadataâ€ƒ3 Confirm â†’ 07-CM

07-CM Contract Detail (page-scoped)  
â€ƒHeader: Title / Status chip / Expiry date  
â€ƒTabs:  
â€ƒ  â€¢ Overviewâ€ƒ(clauses list + risk badges after AI)  
â€ƒ  â€¢ Versionsâ€ƒ(version list; CM can upload new version)  
â€ƒ  â€¢ Diffâ€ƒâ€ƒâ€ƒ(active when â‰¥2 versions)  
â€ƒ  â€¢ Chat       (RAG Q&A)  
â€ƒ  â€¢ Commentsâ€ƒ(threaded side-panel)  
â€ƒ  â€¢ Audit      (all events)  
â€ƒToolbar buttons (conditional): Set Signers, Upload New Version, Cancel Signing, Sign

08 Set Signers Modal  
â€ƒAdd/remove AS & CO, order numbers â†’ invites e-mailed

09 Counter-Sign Modal  
â€ƒSignature canvas â†’ sealing routine â†’ 10

10 Signed Confirmation  
â€ƒGreen bannerâ€ƒButtons Download Sealed PDF | Download Signature Certificate  
â€ƒStatus SIGNED, Chat input disabled, Comments read-only

11 Renew / Clone Menu  
â€ƒVisible on Signed / Expired detail page  
â€ƒâ€¢ Renewâ€ƒâ†’ Upload Wizard (new expiry, v N+1)  
â€ƒâ€¢ Clone as Amendmentâ€ƒâ†’ new contract ID (returns to 06)

12 Profile / Settings  
â€ƒChange password, notification prefs, logout.

C. AUTHORISED SIGNATORY FLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
05-AS â€œDocuments Waiting for Meâ€  
â€ƒRows: Title | Counter-party | Status | CTA (Review / Sign)

06 Review & Comment  
â€ƒPDF viewer + side panel (Comments)  
â€ƒTabs: Document | Versions | Diff | Clauses | Risk | Chat  
â€ƒButtons: Add Comment, Request Change, Sign (if turn)

07 Sign Modal  
â€ƒSignature canvas â†’ â€œSignedâ€ toast â†’ 08-AS

08-AS Post-Sign Screen  
â€ƒBadge â€œAwaiting other signaturesâ€ or â€œFully signedâ€  
â€ƒLinks Download copy | Return to Dashboard

09 History  
â€ƒTable of all past contracts (signed / cancelled).

D. CONTRACT OBSERVER FLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
05-CO Observer Dashboard  
â€ƒSearch + filter chips (tag, counterparty, status)  
â€ƒRead-only table of accessible contracts

06-CO Read-Only Detail  
â€ƒSame tabs as CM, but all write actions disabled  
â€ƒDownload buttons appear when status â‰¥ Signed.

E. SHARED MODALS / MICRO SCREENS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Comment Reply pop-in (thread context)  
â€¢ Request-Change confirmation banner  
â€¢ AI-Updating toast until WS `AI_READY`  
â€¢ 30-Day Expiry yellow banner (tiles + detail header)  
â€¢ View-Receipt hover tooltip (ğŸ‘ timestamp)  
â€¢ Forgot-Password (e-mail entry, reset link)  
â€¢ Email-Verification Failed (resend link)

F. STATE-DRIVEN VISUAL CUES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Status Draftâ€ƒâ†’ Grey chip, Upload button active (CM)  
Status Awaiting Signatureâ€ƒâ†’ Blue chip, Sign button visible to current AS  
Status Needs Revisionâ€ƒâ†’ Orange banner, CM must upload new version  
Status SIGNEDâ€ƒâ†’ Green chip, Sealed-PDF & Certificate buttons, inputs locked  
Status Expiring Soonâ€ƒâ†’ Yellow badge on tiles, banner on detail  
Status EXPIREDâ€ƒâ†’ Red chip, Renew button visible to CM

G. PERMISSION QUICK-TABLE (per screen)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
| Screen            | CM | AS | CO |
|-------------------|----|----|----|
| 05 Dashboard      | âœ”  | âœ”  | âœ”  |
| 06 Upload Wizard  | âœ”  | âœ–  | âœ–  |
| 07 Detail Tabs    | RW | RW | R  |
| Versions tab      | RW | R  | R  |
| Diff tab          | R  | R  | R  |
| Chat              | R/W| R/W| R/W|
| Comments panel    | R/W| R/W| R  |
| Sign modal        | âœ”  | (if turn) | âœ– |
R = readâ€ƒRW = role-specific write actions

H. MINIMUM SUCCESS PATHS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ **CM happy-path** 00â†’03â†’05-CMâ†’06â†’07-CMâ†’08â†’09â†’10  
â€¢ **AS change-request path** emailâ†’05-ASâ†’06 (comment + Request Change)â†’07-CM (upload v2)â†’06â†’07 (Sign)â†’08-AS  
â€¢ **CO audit path** emailâ†’03â†’05-COâ†’06-CO (view, download)â†’logout


